<DOCTYPE! html>
<html>
<head>
	<Title>è¯·æ¬¾</Title>
	<script src="../js/jquery.js"></script>
	<!-- https://www.w3schools.com/css/css_table.asp
	https://www.google.com/search?q=white+color+css+hex&rlz=1C5CHFA_enUS728US728&oq=white+color+css+he&aqs=chrome.0.0j69i57.7232j0j7&sourceid=chrome&ie=UTF-8
	https://www.w3schools.com/colors/colors_shades.asp -->

	<style>
	table {
	    border-collapse: collapse;
	    width: 100%;
	}

	th, td {
	    text-align: left;
	    padding: 8px;
	}

	tr:nth-child(odd){background-color: #FFFFFF}

	th {
	    background-color: #4CAF50;
	    color: white;
	}
	</style>
</head>
<body>
<h1 style="text-align: center">ğŸ’³ä¸Šå®¶ç¡®è®¤ä¸œè¥¿é€åˆ°åï¼Œå³å¯å‘é€è¯·æ¬¾è¯·æ±‚ğŸ’³</h1><!-- ä¸‹æ¬¡åŠ å…¥è‡ªå·±æ ‡è®°é€è´§ -->
<h4 style="text-align: center">è¯·é™„é€è¯´æ˜å…·ä½“ä¿¡ç”¨å¡çš„bill payä¿¡æ¯ï¼Œä»¥åŠå…¶ä»–ç›¸å…³æ³¨æ„äº‹é¡¹ã€‚</h4>
<h4 style="text-align: center">ä¸Šå®¶ä»˜æ¬¾åï¼Œæ­¤å•å°†ä¼šè¢«æ ‡è®°ä¸ºå®Œæˆã€‚</h4>
<div id="echoBackData" style="color: red"></div>
<div id="payment-requested-div"><img src="../images/payment-request.jpg" alt="http://www.cw.com.tw/article/article.action?id=5077754" style="display: block; margin: 0 auto"></div>
<h4 style="text-align: center">ä¸‹æ¬¡ç³»ç»Ÿå‡çº§å¯ä»¥ä»¤å°æŠ¤å£«è‡ªä¸»æ ‡è®°å·²ç»é€è´§ã€‚</h4>
</body>
<script>
	$(function(){
		$.ajax({
				method: "post",
				url: "../nursePages/payment_request/payment-requested-data-list.php",
				success: function(backData){
					if (backData != ''){
						$("#payment-requested-div").html(backData);
						$(".bankNote-div").hide();
					} else {
						
					}
					// Send Payment Request Btn
					$(".payment-request-btn").on("click", function(){
						var sentReqId = $(this).attr("data-req-payment-for-sentReqId");
						$("div[data-bankNote-div-for-sentReqId=" + sentReqId + "]").show();
						// Submit-payment-request-btn click
						$("button[data-req-payment-submit-btn-sentReqId=" + sentReqId + "]").on("click", function(){
							var bankNote = $("textarea[data-bankNote-for-sentReqId=" + sentReqId + "]").val();
							if(confirm("è¯·ç¡®è®¤è¯·æ¬¾ä¿¡æ¯ï¼š\n" + bankNote)){
								var sendData = "sentReqId=" + sentReqId + "&bankNote=" + bankNote;
								$.ajax({
									method: "post",
									url: "../nursePages/payment_request/payment-bank-info.php?",
									data: sendData,
									success: function(backData){
										alert(backData);
										$("#page-switch").load("../nursePages/payment-requested.html");
										//$('.bankNote-div').hide();
										/*$.ajax({
											method: "post",
											url: "../nursePages/payment_request/payment-requested-data-list.php",
											success: function(backData){
												//$("#payment-requested-div").html(backData);
												//ç›¸å½“äºåˆ·æ–°ï¼Ÿ
												// No good, 041417 22533am 3E
											}
										});*/
									}
								});
							}
						});
						// Cancel Submit-payment-request-btn click
						$("button[data-req-payment-submit-btn-cancel-sentReqId=" + sentReqId + "]").on("click", function(){
							$("div[data-bankNote-div-for-sentReqId=" + sentReqId + "]").hide();
						});

					});

					// Confirm paid by admin btn
					$(".payment-confirm-btn").on("click", function(){
						var sentReqId = $(this).attr("data-confirm-payment-for-sentReqId");
						var sendData = "sentReqId=" + sentReqId;
						if(confirm("ğŸ’µç¡®è®¤æ¬¾é¡¹åˆ°äº†ï¼Ÿåˆ°äº†ï¼Ÿï¼åˆ°äº†å•Šï¼ï¼ï¼ğŸ˜ğŸ˜ğŸ˜")){
							$.ajax({
								method: "post",
								url: "../nursePages/payment_request/payment-confirmed-order-complete.php?",
								data: sendData,
								success: function(backData){
									alert(backData);
									$("#page-switch").load("../nursePages/payment-requested.html");
									/*$("echoBackData").html(backData);
									$('.bankNote-div').hide();
									$.ajax({
										method: "post",
										url: "../nursePages/payment_request/payment-requested-data-list.php",
										success: function(backData){
											$("#payment-requested-div").html(backData);
											//ç›¸å½“äºåˆ·æ–°ï¼Ÿ
										}
									});*/
								}
							});
						}
					});
				}
		});
	});
</script>
</html>