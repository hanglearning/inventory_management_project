<DOCTYPE! html>
<html>
<head>
	<Title>å·²åˆ°è´§</Title>
	<script src="../js/jquery.js"></script>
</head>
<body>
<h1 style="text-align: center">ğŸ¤‘è¿™äº›å•å­æ˜¯ä½ å·²ç»ç¡®è®¤åˆ°è´§çš„ğŸ¤‘</h1>
<h4 style="text-align: center">ğŸ“¦ä½ ç°åœ¨å¯ä»¥å‘ç¥åŒ»å‘é€å‘è´§ç”³è¯·ï¼Œè¯·ä¸€å®šåŠæ—¶é€è´§ï¼Œå¥½æ‹¿åˆ°è¡€æ±—ğŸ’°ï¼ğŸ˜</h4>
<h4 style="text-align: center">ç¥åŒ»ç¡®è®¤åˆ°è´§åï¼Œå³å¯è¦æ±‚å¯¹æ­¤æ¬¡é€è´§çš„è¯·æ¬¾ã€‚</h4>
<div id="totalOrdersNum"></div>
<div id="confirmed-arrival-div"></div>
<button id="send-sent-request-btn">å¯¹è¿™äº›è®¢å•è¦æ±‚å‘è´§</button>
</body>
<script>
	$(function(){
		var deliveryRequestCheckedArray = [];
		$.ajax({
				method: "post",
				url: "../nursePages/arrival_confirmed/arrival-confirmed-data-list.php",
				success: function(backData){
					$("#confirmed-arrival-div").html(backData);
					var totalOrders = $("div[class='arrived-orders-div']").length;
					$("#totalOrdersNum").html("æ€»å…±å•æ•°ï¼š" + totalOrders);
					$('#send-sent-request-btn').on("click", function() {
						// https://www.youtube.com/watch?v=Fekw8FwJcOk
						// http://stackoverflow.com/questions/786142/how-to-retrieve-checkboxes-values-in-jquery Should be this one, or look at OBS around 040617 44204am
						$("input[class=check-for-delivery-request]").each(function(){
							if ($(this).is(':checked')){
								deliveryRequestCheckedArray.push($(this).attr("data-delivery-request-for-orderTakenId"));
							}
						});
						//alert(deliveryRequestCheckedArray);
						if(confirm("ç¡®è®¤å¯¹è¿™äº›å•å­é€è´§ï¼Ÿ\nè¯·ä»”ç»†æ ¸å¯¹ï¼Œç›®å‰ä¸æ”¯æŒåæ‚”ã€‚")){
							var sentData = "deliveryRequestCheckedArray=" + deliveryRequestCheckedArray;
							$.ajax({
								method: "post",
								url: "../nursePages/arrival_confirmed/sent-delivery-request.php?",
								data: sentData,
								success: function(backData){
									alert(backData);
									$("#page-switch").load("../nursePages/arrival-confirmed.html");
								}
							});
							/*$("input[class=check-for-delivery-request]").each(function(){
								$(this).remove();
							});*/
							$("input[class=check-for-delivery-request]").each(function(){
								if ($(this).is(':checked')){
									// https://www.google.com/webhp?sourceid=chrome-instant&rlz=1C5CHFA_enUS728US728&ion=1&espv=2&ie=UTF-8#q=jquery+get+parent+div
									$(this).parent().remove();
								}
							});
						}
					});
					/*
					var elementsToCheck = document.getElementsByClassName('check-for-delivery-request');
					for(var i = 0; i < elementsToCheck.length; i++) {
					    if(elementsToCheck[i].checked) {
							deliveryRequestCheckedArray.push("haha");
						}
					}
					$("#send-sent-request-btn").on("click", function(){
							alert(deliveryRequestCheckedArray);
					});
					*/	
				}
		});
	});
</script>
</html>