<!DOCTYPE html>
<html>
<head>
	<Title>æ³¨å†Œ Make Money Together</Title>
	<script src="js/jquery.js"></script>
	<script src="js/moment.js" type="text/javascript"></script>
	<style>
		input[type=email], select {
		    width: 50%;
		    padding: 12px 20px;
		    margin: 8px 0;
		    display: inline-block;
		    border: 1px solid #ccc;
		    border-radius: 4px;
		    box-sizing: border-box;
		}

		input[type=text], select {
		    width: 50%;
		    padding: 12px 20px;
		    margin: 8px 0;
		    display: inline-block;
		    border: 1px solid #ccc;
		    border-radius: 4px;
		    box-sizing: border-box;
		}

		input[type=password], select {
		    width: 50%;
		    padding: 12px 20px;
		    margin: 8px 0;
		    display: inline-block;
		    border: 1px solid #ccc;
		    border-radius: 4px;
		    box-sizing: border-box;
		}

		input[type=submit] {
		    width: 100%;
		    background-color: #4CAF50;
		    color: white;
		    padding: 14px 20px;
		    margin: 8px 0;
		    border: none;
		    border-radius: 4px;
		    cursor: pointer;
		}

		input[type=submit]:hover {
		    background-color: #45a049;
		}

		div {
		    border-radius: 5px;
		    background-color: #f2f2f2;
		    padding: 20px;
		}

		h1 {text-align:center;}

		button {
		    background-color: #4CAF50;
		    border: none;
		    color: white;
		    padding: 15px 32px;
		    text-align: center;
		    text-decoration: none;
		    display: inline-block;
		    font-size: 16px;
		    margin: 4px 2px;
		    cursor: pointer;
		}
		/*https://www.w3schools.com/css/tryit.asp?filename=trycss_buttons_basic*/
		span {
			color: red;
			font-size: 80%;
		}
	</style>
</head>
<body>
	<div style="width: 600px; margin: auto">
		<h1>ğŸ’µä½ å‡†å¤‡å¥½èµšå¤§é’±äº†å—ï¼ŸğŸ’µ</h1>
		<div id="registerOutput"></div>
		<form id="registration-form">
				<strong>ğŸ’Œä¼Šå¦¹å°”ğŸ’Œ</strong>
				<!--
				<input id="userEmail" type="email" required onblur="validateEmail()"/>
				-->
				<input id="userEmail" type="email" required"/>
				<span id="email_invalid_error_message"></span>
				<br/>
				<span>ä½ å°±ç”¨å®ƒç™»é™†ã€‚</span>
			<br/>
				<strong>ğŸ”æ€•æ­»æ²ƒå¾·</strong>
				<input id="userPassword" type="password" maxlength="50" required />
				<br/>
				<span>æœ€å¤š50ä½ï¼æœ€å¥½åˆ«ç”¨å¸¸ç”¨å¯†ç äº†ï¼Œè™½ç„¶ä¼šè¢«åŠ å¯†ï¼Œä½†ä½ ä¸æ€•å“ªä¸€å¤©åŠ å¯†ç®—æ³•è¢«æˆ‘ç ´è§£ï¼Ÿ</span>
			<br/>
				<strong>ğŸ™„ç¡®è®¤æ€•æ­»æ²ƒå¾·</strong>
				<input id="userPasswordConfirm" type="password" maxlength="50" required />
				<br/>
				<span>ç”±äºç›®å‰ä¸å¥½æ›´æ”¹å¯†ç ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦ä½ ç¡®è®¤ä¸€ä¸‹ã€‚</span>
			<br/>
				<strong>ğŸŒåå­—</strong>
				<input id="userName" type="text" required />
				<br/>
				<span>éšä¾¿ä½ çˆ±è¢«å«å•¥å°±å«å•¥ã€‚</span>
			<br/>
				<strong>ğŸ“±ç”µè¯å·ç </strong>
				<input id="userPhone" type="text" maxlength="10" required />
				<br/>
				<span>å¾—æ˜¯ç¾å›½å·ç ï¼Œçº¯æ•°å­—10ä½ï¼Œæˆ‘è¯»ä¹¦å°‘åˆ«è’™æˆ‘ï¼</span>
			<br/>
				<strong>ğŸ§QQå·</strong>
				<input id="userQQ" type="text" required />
				<br/>
				<span>èµšå¤§é’±ç¦»ä¸å¼€ä½ çš„QQå·ï¼Œè‹¥é‚®ç®±æ˜¯è´¦å·å°±å¡«é‚®ç®±å§ã€‚</span>
			<br/>
				<strong>ãŠ™ï¸å¾®ä¿¡</strong>
				<input id="userWeChat" type="text" placeholder="éšä¾¿ï¼Œæˆ‘ä¸ç¨€ç½•"/>
			<br/>
				<strong>ğŸš»è¢«è°ä»‹ç»æ¥çš„ï¼Ÿ</strong>
				<input id="userReferred" type="text" placeholder="éšä¾¿ï¼Œä½†æˆ‘æŒºæƒ³çŸ¥é“çš„"/>
			<br/>
				<button id="register-btn" type="submit">æ³¨å†Œ</button>
		</form>
	</div>
	<script>

		//Validate Email: https://www.w3schools.com/js/tryit.asp?filename=tryjs_form_validate_email
		//Verify Email function
		// onblur https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_onblur
		/*
		validateEmail(){
			var userEmail = document.getElementById("userEmail");
			alert(userEmail);
			var atpos = userEmail.indexOf("@");
	    	var dotpos = userEmail.lastIndexOf(".");
	    	if (atpos<1 || dotpos<atpos+2 || dotpos+2>=x.length) {
	        	document.getElementById("email_invalid_error_message").innerHTML = "ä½ ä¸«è’™æˆ‘å‘ï¼Ÿè¿™æ˜¯æ­£ç»çš„ä¼Šå¦¹å„¿å—ï¼Ÿ";
	    	}
		}*/

		$(document).ready(function(){

			$("#registration-form").on("submit", function(e){

				e.preventDefault();

				var userEmail 			= $("#userEmail").val();
				var userPassword 		= $("#userPassword").val();
				var userPasswordConfirm = $("#userPasswordConfirm").val();
				var userName 			= $("#userName").val();
				var userPhone			= $("#userPhone").val();
				var userQQ 				= $("#userQQ").val();
				var userWeChat 			= $("#userWeChat").val();
				var userReferred 		= $("#userReferred").val();
				//Cloud9 says no two timestamp can be together, and checked SO saying the updated MySQL doesn't like it, so create one myself. Thanks to MomentJS
				var registeredTime		= moment().format('YYYY-MM-DD hh:mm:ss');
				

				var registerData = "userEmail=" + userEmail + "&userPassword=" + userPassword + "&userPasswordConfirm=" + userPasswordConfirm + "&userName=" + userName + "&userPhone=" + userPhone + "&userQQ=" + userQQ + "&userWeChat=" + userWeChat + "&userReferred=" + userReferred + "&registeredTime=" + registeredTime;

				$.ajax({
					method: "post",
					url: 	"register.php?",
					data: 	registerData,
					success: function(backData){
						$("#registerOutput").html(backData);
					}
				});
			});
		});
	</script>
</body>
</html>