{"filter":false,"title":"orders-claimed.html","tooltip":"/nursePages/orders-claimed.html","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":193,"column":0},"end":{"row":193,"column":43},"action":"insert","lines":[".replaceWith(\"<div class='loader'></div>\");"],"id":2}],[{"start":{"row":193,"column":0},"end":{"row":194,"column":0},"action":"remove","lines":[".replaceWith(\"<div class='loader'></div>\");",""],"id":3}],[{"start":{"row":149,"column":84},"end":{"row":150,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":150,"column":0},"end":{"row":150,"column":11},"action":"insert","lines":["\t\t\t\t\t\t\t\t\t\t\t"]}],[{"start":{"row":150,"column":11},"end":{"row":150,"column":110},"action":"insert","lines":["$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");"],"id":7}],[{"start":{"row":0,"column":0},"end":{"row":263,"column":7},"action":"remove","lines":["<DOCTYPE! html>","<html>","<head>","\t<Title>æˆ‘é¢†åˆ°çš„è®¢å•</Title>","\t<script src=\"../js/jquery.js\" type=\"text/javascript\"></script>","</head>","\t<body>","\t\t<h1>ğŸ˜è¿™é‡Œçš„è®¢å•éƒ½æ˜¯æˆ‘æŠ¢åˆ°çš„ğŸ‘</h1>","\t\t<!-- http://stackoverflow.com/questions/114543/how-to-horizontally-center-a-div-in-another-div -->","\t\t<div id=\"help-btns\" style=\"display: table;margin: 0 auto\">","\t\t<button id=\"show-helpText\">ä¸‹é¢è¿™äº›å¯æ€•çš„æŒ‰é’®æ˜¯å¹²ä»€ä¹ˆçš„ï¼ŸğŸ™€</button>","\t\t<button id=\"show-revert-order-close-order-compare\">âš ï¸ã€è¿”å›è®¢å•ã€‘ä¸ã€å…³é—­è®¢å•ã€‘æœ‰ä½•åŒºåˆ«ï¼Ÿ</button>","\t\t</div>","\t\t<h4 class='helpText'>âš ï¸æ³¨æ„ï¼šå¦‚æœä½ å·²ç»æˆåŠŸçš„ä¸‹å‡ºæ¥äº†ä½ çš„è›‹é‚£ä¹ˆè¯·ä½ æ”¶åˆ°è´§çš„æ—¶å€™ç‚¹å‡»ã€ç¡®è®¤æ”¶è´§ã€‘ã€‚</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€ä¿®æ”¹æ•°é‡ã€‘å¦‚æœä½ å‘ç°ä½ å…¶å®ä¸‹ä¸å‡ºæ¥è¿™ä¹ˆå¤šè›‹ï¼Œæ¯”å¦‚ä¿¡ç”¨å¡æˆ–è€…åœ°å€é™åˆ¶çš„åŸå› ã€‚å¦‚æœä¸æ˜¯ALL INçš„è›‹çš„è¯ç›®å‰åªèƒ½å¾€å°‘é‡Œæ”¹ã€‚</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€æ·»åŠ /ä¿®æ”¹å¤‡æ³¨ã€‘ï¼ˆæ­¤é¡¹é€‰å¡«ï¼‰é™¤äº†ç¥åŒ»æä¾›çš„å¤‡æ³¨ï¼Œä½ è¿˜å¯ä»¥å°±æ­¤å•åŠ å…¥ä¸€äº›è‡ªå·±çš„å¤‡æ³¨ï¼Œæ¯”å¦‚è¯´ç”¨å“ªå¼ å¡ä¸‹çš„å•ï¼ˆå»ºè®®ç”¨å¡æ˜µç§°æˆ–è€…å¡«å†™å¡å·åå››ä½ï¼‰æˆ–è€…ä¸‹åˆ°äº†å“ªä¸ªåœ°å€ã€‚æ­¤ä¿¡æ¯åå°ä¸ä¼šåŠ å¯†æ‰€ä»¥å¡«å†™å®Œæ•´çš„å¡å·ä½ å°±ç­‰ç€è¢«æˆ‘ç›—åˆ·å§ï¼ğŸ¤‘</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€è¿”å›è®¢å•ã€‘å¦‚æœä½ é¢†å•åå‘ç°ä½ æ— æ³•ä¸‹å‡ºè¿™äº›è›‹æ¥ã€‚æ²¡å…³ç³»ï¼Œå¸¸åœ¨æ²³è¾¹èµ°å“ªæœ‰ä¸æ¹¿é‹ï¼Œè¿™ä¸ªè®¢å•å°†ä¼šåœ¨ã€æ‰€æœ‰è®¢å•ã€‘ä¸­è¢«æ ‡è®°ä¸ºâ€œå·²è¿”å›â€è€Œä¸”æ•°é‡ä¼šåŠ å›åŸæ¥çš„æ”¶è´§æ•°é‡ï¼Œç»™å¹´è½»äººä¸€ä¸ªæœºä¼šå§ï¼</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€å…³é—­è®¢å•ã€‘å¦‚æœä»»ä½•æ—¶å€™ä½ å‘ç°ä½ è¢«ç å•ï¼Œä¸¢å•æˆ–ä»»ä½•éä½ æœ¬äººåŸå› å¯¼è‡´çš„ä¸‹å•åè´§ç‰©æ²¡æœ‰æ”¶åˆ°ã€‚<span style='color:red; font-size: 20px'>æ­¤æ—¶å¯ä»¥å»ã€è¿½è¸ªé€€æ¬¾ã€‘ä¸­è¿½è¸ªé€€æ¬¾ã€‚è¯·ä¸€å®šæ³¨æ„å•†å®¶çš„é€€æ¬¾å¦åˆ™é£äº†çš„ğŸ’°è‡ªå·±äºï¼ï¼ï¼</span></h4>","\t\t<p id=\"revert-order-close-order-compare\">è¿”å›è®¢å•æ„å‘³ç€ä½ é¢†å•åå´å‘ç°æ ¹æœ¬å°±ä¸‹ä¸å‡ºæ¥è¿™äº›è´§ï¼Œæ¯”å¦‚ä¿¡ç”¨å¡è¿‡ä¸äº†ç­‰åŸå› ï¼›è€Œå…³é—­è®¢å•æ„å‘³ç€ä½ ä¸€å¼€å§‹ç½‘ç«™å·²ç»ç¡®è®¤ä½ çš„å•å­è¢«ç½‘åº—æ¥å—ï¼Œä½†ä¹‹åå´å› ä¸ºç§ç§åŸå› å¯¼è‡´ç å•ä¹‹ç±»çš„ï¼Œä¸€èˆ¬æ¥è¯´ä½ çš„ä¿¡ç”¨å¡æ˜¯å·²ç»è¢«æ‰£äº†æ¬¾ã€‚æ‰€ä»¥å…³é—­è®¢å•å¯ä»¥å¸®ä½ æˆ–è€…æé†’ä½ æœ‰äº›å•å­çš„refundè®°å¾—å»keep an eye onğŸ‘€!</p>","\t\t<div id=\"echoBackData\" style=\"color: red\"></div>","\t\t<div id=\"totalOrdersNum\"></div>","\t\t<div id=claimed-orders-div><h2 style='text-align:center'>æ­£åœ¨åŠ è½½ã€‚ã€‚ã€‚</h2></div>","\t</body>","\t<script>","\t\t$(document).ready(function(){","\t\t\t$(\".helpText\").hide();","\t\t\t$(\"#show-helpText\").on(\"click\", function(){","\t\t\t\t$(\".helpText\").toggle();","\t\t\t});","\t\t\t$(\"#revert-order-close-order-compare\").hide();","\t\t\t$(\"#show-revert-order-close-order-compare\").on(\"click\", function(){","\t\t\t\t$(\"#revert-order-close-order-compare\").toggle();","\t\t\t});","\t\t\t$.ajax({","\t\t\t\tmethod: \"post\",","\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\tsuccess: function(backData){","\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t} else {","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(\"<h3 style='text-align:center'>æˆ‘å…¶å®å¹¶æ²¡æœ‰æŠ¢è›‹ã€‚ã€‚ã€‚</h3><br><img src='../images/honghuangzhili.jpg' alt='http://bbs.178.com/thread-20241673-1-1.html' style='display: block; margin: 0 auto'>\");","\t\t\t\t\t}","\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders);","\t\t\t\t\t$(\".order-change-qty-div\").hide();","\t\t\t\t\t$(\".order-add-selfNote-div\").hide();","\t\t\t\t\t// PHP back order-confirm-btn","\t\t\t\t\t$(\".order-confirm-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-confirm-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-confirm-order-userId\");","\t\t\t\t\t\tvar qtyTaken = $(this).attr(\"data-qty-taken-confirm\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tif (confirm(\"è¯·ç¡®è®¤ä½ æ”¶åˆ°äº†å…¨éƒ¨æ•°é‡ \" + qtyTaken + \" ä¸ªè´§ç‰©äº†ï¼\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&orderTakenId=\" + orderTakenId + \"&orderStatus=2\";","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t// Cannot directly write php here since:","\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/21651701/writing-php-inside-javascript-function","\t\t\t\t\t\t\t\t//php is executed before the page is sent to the client. you have to make a second php script containing the function. ","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/arrival-confirmed.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders + \"ã€‚\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back order-change-qty-btn","\t\t\t\t\t$(\".order-change-qty-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-change-qty-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-change-qty-userId\");","\t\t\t\t\t\tvar originalQtyTaken = $(this).attr(\"data-qty-taken\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//ä¸»è¦ç”¨data-qty-leftæ¥åˆ¤æ–­type","\t\t\t\t\t\tvar qtyType = $(this).parent().attr(\"data-qty-left\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tvar orderChangeDivHtml;","\t\t\t\t\t\tvar orderChangeDivHtmlButtons = \"<button data-change-qty-orderId-btn=\" + orderId + \" type='submit'>æäº¤</button>\" +","\t\t\t\t\t\t\t\"<button data-change-qty-cancel-orderId-btn=\" + orderId + \">ä¿ºä¸æ”¹äº†</button>\";","\t\t\t\t\t\tif (qtyType != \"ALL IN\") {","\t\t\t\t\t\t\torderChangeDivHtml = \"æ›´æ”¹æ•°é‡ä¸º<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + \"<span>ä¸èƒ½è¶…è¿‡ \" + originalQtyTaken + \"ã€‚</span>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\torderChangeDivHtml = \"æ›´æ”¹æ•°é‡ä¸º<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t}","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").html(orderChangeDivHtml);","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").show();","\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\tvar qtyChangeTo = $(\"input[data-change-qty-orderId-input=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tif (isNaN(parseInt(qtyChangeTo))){","\t\t\t\t\t\t\t\talert(\"çœŸè°ƒçš®ï¼ä½ æ˜¯ğŸ’è¯·æ¥é€—æ¯”çš„å—ï¼Ÿ\");","\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\tif(parseInt(qtyChangeTo) < 1){","\t\t\t\t\t\t\t\t\talert(\"ğŸ˜ˆåˆ«ä»¥ä¸ºç¼–ç½‘ç«™çš„äººæ˜¯ä¸ªé€—é€¼å°±å…è®¸ä½ è¿™ä¹ˆèƒ¡æ¥ï¼\");","\t\t\t\t\t\t\t\t} else if (parseInt(qtyChangeTo) ==  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\talert(\"ğŸ¤“ä½ æ˜¯å¥½å¥‡è¿™æ¬¡ä¼šè¹¦å‡ºä»€ä¹ˆå½©è›‹è¿˜æ˜¯æƒ³å¸®æˆ‘debugæˆ‘çš„codeçœ‹çœ‹ç­‰äºçš„æƒ…å†µæˆ‘æ˜¯å¦è€ƒè™‘åœ¨å†…äº†ï¼Ÿ\");","\t\t\t\t\t\t\t\t} else if(parseInt(qtyChangeTo) <  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\tif(confirm(\"è¯·ç¡®è®¤æ›´æ”¹æ•°é‡ä¸º\" + qtyChangeTo + \"ã€‚\\næ„å‘³ç€ä½ å°†å°‘ä¸‹\" + cutOrdersNum + \"å•ã€‚\")){","\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t// MUST refresh div or user can resubmit change and mess up the qty right there, see obs 041317 80650am 3E","\t\t\t\t\t\t\t\t\t\t\t\t/*","\t\t\t\t\t\t\t\t\t\t\t\tæœç„¶ä¸èƒ½ç”¨æ­¤æ–¹æ³•åˆ·æ–°ï¼Œbuttonéƒ½ä¸ç®¡ç”¨äº†ã€‚","\t\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders);","\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t});æ‰€ä»¥ä¹Ÿè®¸åªå¾—é‡æ–°loadæœ€å¥½äº†*/","\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t//å¯¹é‡æ–°loadå°±æ²¡æœ‰html backdata äº†ï¼Œé‚£æŠŠ$(\"#echoBackData\").html(backData);æ”¾ä¸‹é¢æ¥å‘¢ï¼Ÿ","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//è¿™æ ·ä¸ç®¡ç”¨ï¼Œçœ‹æ¥åªèƒ½ç”¨alertäº†ã€‚","\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/5294842/refresh-a-page-using-javascript-or-html","\t\t\t\t\t\t\t\t\t\t//å¦‚æœuserç‚¹å®Œè¿™ä¸ªé©¬ä¸Šç‚¹äº†revertï¼Œé‚£é¿å…ç»™revert-buttonæä¾›è¿˜æ²¡æœ‰è¢«changeçš„qtyï¼Œå› ä¸ºæ²¡æœ‰reloadå°±ä¸ä¼šé‡æ–°queryæ•°æ®åº“å°±æ‹¿ä¸åˆ°æœ€æ–°qtyLeft","\t\t\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t// Do nothing","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\tif (qtyType != \"ALL IN\"){","\t\t\t\t\t\t\t\t\t\talert(\"ğŸ¤“å¦®è¨çš®ï¼ä½ çœ‹çœ‹ \" + originalQtyTaken + \" æ¯” \" + qtyChangeTo + \" å¤§ï¼Ÿä½ æ•°å­¦æ˜¯ä½“è‚²è€å¸ˆæ•™çš„å§å“ˆå“ˆå“ˆå“ˆå“ˆï¼\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\t\tvar addOrdersNum = cutOrdersNum * (-1);","\t\t\t\t\t\t\t\t\t\tif(confirm(\"è¯·ç¡®è®¤æ›´æ”¹æ•°é‡ä¸º\" + qtyChangeTo + \"ã€‚\\næ˜ç¡®ä½ å†å¤šä¸‹\" + addOrdersNum + \"å•ã€‚\")){","\t\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t\t//ä¿æŒcutOrdersNumï¼Œphpåº”è¯¥å¯ä»¥ç›´æ¥è´Ÿè´Ÿå¾—æ­£","\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t} else {","","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}\t","\t\t\t\t\t\t});","\t\t\t\t\t\t$(\"button[data-change-qty-cancel-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").hide();","\t\t\t\t\t\t});","\t\t\t\t\t\t","\t\t\t\t\t});","\t\t\t\t\t// PHP back add/change-self-note-button","\t\t\t\t\t$(\".order-add-selfNote-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-add-selfNote-orderId\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t$(\"div[data-order-add-selfNote-div-orderId=\" + orderId + \"]\").toggle();","\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar selfNote = $(\"input[data-order-add-selfNote-input-orderId=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tvar sendData = \"orderTakenId=\" + orderTakenId + \"&selfNote=\" + selfNote;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/add-selfNote.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t});","\t\t\t\t\t});","\t\t\t\t\t// PHP back revert-order-btn","\t\t\t\t\t$(\".revert-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-revert-order-userId\");","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-revert-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-revert-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\tif(confirm(\"ç¡®è®¤è¿”å›è®¢å•å—ï¼Ÿ\\nè¯·æ³¨æ„ï¼Œä½ æ— æ³•é‡æ–°ç”³é¢†è¿™ä¸ªè›‹è›‹äº†ï¼\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-revert.php?\",","\t\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders + \"ã€‚\");","\t\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t//å…¶å®ç›´æ¥å¯ä»¥åˆ·æ–°äº†ï¼Œå› ä¸ºè¦æ›´æ–°orders-numï¼Œæ‰€ä»¥å¾€åè¿™ç§éœ€è¦åˆ·æ–°å…¶ä»–è¿å¸¦æ•°æ®æ—¶ä¹Ÿä¸ç”¨å°±remove","\t\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t} else {","","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back close-order-btn","\t\t\t\t\t$(\".close-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-close-order-userId\");","\t\t\t\t\t\tvar orderId =$(this).attr(\"data-close-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-close-order-back-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar closeReason = prompt(\"ä¸ºäº†æ–¹ä¾¿è¿½è¸ªé€€æ¬¾ï¼Œè¯·è¾“å…¥ä»»ä½•ä½ ä¹‹åæ‰€éœ€è¦çš„æé†’ä¿¡æ¯ä¾‹å¦‚ç”¨çš„å“ªå¼ å¡ä¹‹ç±»çš„ï¼Œè¯·å‹¿è¾“å…¥å…¨éƒ¨å¡å·ï¼Œå› ä¸ºæˆ‘ä¹Ÿä¸æ„Ÿå…´è¶£ã€‚ï¼ˆå¿…å¡«ï¼Œè‹¥å•¥éƒ½ä¸å¡«ä¸äºˆé€šè¿‡ï¼‰\\nè¯·æ³¨æ„ä½ æ— æ³•å†é‡æ–°å¼€å¯è¿™ä¸ªè®¢å•ã€‚\");","\t\t\t\t\t\t//å†æ”¹æˆwhileå§ã€‚ã€‚","\t\t\t\t\t\t/*whileä¸è¡Œï¼Œä¸èƒ½cancel","\t\t\t\t\t\twhile (!closeReason){","\t\t\t\t\t\t\tcloseReason = prompt(\"ğŸ‘ºè€å…«å®å„¿çš„äº¤ä»£ï¼\");","\t\t\t\t\t\t}*/","\t\t\t\t\t\t//if(closeReason != null){","\t\t\t\t\t\tif(closeReason){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderStatus=8\" + \"&exceptionNote=\" + closeReason + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-close.php?\",","\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders + \"ã€‚\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove(); 041017 63714am åˆå†™å›å»äº†","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t//å…¶å®ä¸ç”¨ç”¨whileï¼Œè§040917 101746pm 3E OBS","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/30389982/how-to-set-prompt-textbox-field-in-js-as-required-field","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/154059/how-do-you-check-for-an-empty-string-in-javascript","\t\t\t\t\t\t\t//è²Œä¼¼è¿˜æ˜¯å¾—ç”¨while","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t}","\t\t\t});","\t\t});","\t</script>","</html>"],"id":8},{"start":{"row":0,"column":0},"end":{"row":263,"column":7},"action":"insert","lines":["<DOCTYPE! html>","<html>","<head>","\t<Title>æˆ‘é¢†åˆ°çš„è®¢å•</Title>","\t<script src=\"../js/jquery.js\" type=\"text/javascript\"></script>","</head>","\t<body>","\t\t<h1>ğŸ˜è¿™é‡Œçš„è®¢å•éƒ½æ˜¯æˆ‘æŠ¢åˆ°çš„ğŸ‘</h1>","\t\t<!-- http://stackoverflow.com/questions/114543/how-to-horizontally-center-a-div-in-another-div -->","\t\t<div id=\"help-btns\" style=\"display: table;margin: 0 auto\">","\t\t<button id=\"show-helpText\">ä¸‹é¢è¿™äº›å¯æ€•çš„æŒ‰é’®æ˜¯å¹²ä»€ä¹ˆçš„ï¼ŸğŸ™€</button>","\t\t<button id=\"show-revert-order-close-order-compare\">âš ï¸ã€é€€å›è®¢å•ã€‘ä¸ã€å…³é—­è®¢å•ã€‘æœ‰ä½•åŒºåˆ«ï¼Ÿ</button>","\t\t</div>","\t\t<h4 class='helpText'>âš ï¸æ³¨æ„ï¼šå¦‚æœä½ å·²ç»æˆåŠŸçš„ä¸‹å‡ºæ¥äº†ä½ çš„è›‹é‚£ä¹ˆè¯·ä½ æ”¶åˆ°è´§çš„æ—¶å€™ç‚¹å‡»ã€ç¡®è®¤æ”¶è´§ã€‘ã€‚</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€ä¿®æ”¹æ•°é‡ã€‘å¦‚æœä½ å‘ç°ä½ å…¶å®ä¸‹ä¸å‡ºæ¥è¿™ä¹ˆå¤šè›‹ï¼Œæ¯”å¦‚ä¿¡ç”¨å¡æˆ–è€…åœ°å€é™åˆ¶çš„åŸå› ã€‚å¦‚æœä¸æ˜¯ALL INçš„è›‹çš„è¯ç›®å‰åªèƒ½å¾€å°‘é‡Œæ”¹ã€‚</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€æ·»åŠ /ä¿®æ”¹å¤‡æ³¨ã€‘ï¼ˆæ­¤é¡¹é€‰å¡«ï¼‰é™¤äº†ç¥åŒ»æä¾›çš„å¤‡æ³¨ï¼Œä½ è¿˜å¯ä»¥å°±æ­¤å•åŠ å…¥ä¸€äº›è‡ªå·±çš„å¤‡æ³¨ï¼Œæ¯”å¦‚è¯´ç”¨å“ªå¼ å¡ä¸‹çš„å•ï¼ˆå»ºè®®ç”¨å¡æ˜µç§°æˆ–è€…å¡«å†™å¡å·åå››ä½ï¼‰æˆ–è€…ä¸‹åˆ°äº†å“ªä¸ªåœ°å€ã€‚æ­¤ä¿¡æ¯åå°ä¸ä¼šåŠ å¯†æ‰€ä»¥å¡«å†™å®Œæ•´çš„å¡å·ä½ å°±ç­‰ç€è¢«æˆ‘ç›—åˆ·å§ï¼ğŸ¤‘</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€é€€å›è®¢å•ã€‘å¦‚æœä½ é¢†å•åå‘ç°ä½ æ— æ³•ä¸‹å‡ºè¿™äº›è›‹æ¥ã€‚æ²¡å…³ç³»ï¼Œå¸¸åœ¨æ²³è¾¹èµ°å“ªæœ‰ä¸æ¹¿é‹ï¼Œè¿™ä¸ªè®¢å•å°†ä¼šåœ¨ã€æ‰€æœ‰è®¢å•ã€‘ä¸­è¢«æ ‡è®°ä¸ºâ€œå·²é€€å›â€è€Œä¸”æ•°é‡ä¼šåŠ å›åŸæ¥çš„æ”¶è´§æ•°é‡ï¼Œç»™å¹´è½»äººä¸€ä¸ªæœºä¼šå§ï¼</h4>","\t\t<h4 class='helpText'>âš ï¸ç‚¹å‡»ã€å…³é—­è®¢å•ã€‘å¦‚æœä»»ä½•æ—¶å€™ä½ å‘ç°ä½ è¢«ç å•ï¼Œä¸¢å•æˆ–ä»»ä½•éä½ æœ¬äººåŸå› å¯¼è‡´çš„ä¸‹å•åè´§ç‰©æ²¡æœ‰æ”¶åˆ°ã€‚<span style='color:red; font-size: 20px'>æ­¤æ—¶å¯ä»¥å»ã€è¿½è¸ªé€€æ¬¾ã€‘ä¸­è¿½è¸ªé€€æ¬¾ã€‚è¯·ä¸€å®šæ³¨æ„å•†å®¶çš„é€€æ¬¾å¦åˆ™é£äº†çš„ğŸ’°è‡ªå·±äºï¼ï¼ï¼</span></h4>","\t\t<p id=\"revert-order-close-order-compare\">é€€å›è®¢å•æ„å‘³ç€ä½ é¢†å•åå´å‘ç°æ ¹æœ¬å°±ä¸‹ä¸å‡ºæ¥è¿™äº›è´§ï¼Œæ¯”å¦‚ä¿¡ç”¨å¡è¿‡ä¸äº†ç­‰åŸå› ï¼›è€Œå…³é—­è®¢å•æ„å‘³ç€ä½ ä¸€å¼€å§‹ç½‘ç«™å·²ç»ç¡®è®¤ä½ çš„å•å­è¢«ç½‘åº—æ¥å—ï¼Œä½†ä¹‹åå´å› ä¸ºç§ç§åŸå› å¯¼è‡´ç å•ä¹‹ç±»çš„ï¼Œä¸€èˆ¬æ¥è¯´ä½ çš„ä¿¡ç”¨å¡æ˜¯å·²ç»è¢«æ‰£äº†æ¬¾ã€‚æ‰€ä»¥å…³é—­è®¢å•å¯ä»¥å¸®ä½ æˆ–è€…æé†’ä½ æœ‰äº›å•å­çš„refundè®°å¾—å»keep an eye onğŸ‘€!</p>","\t\t<div id=\"echoBackData\" style=\"color: red\"></div>","\t\t<div id=\"totalOrdersNum\"></div>","\t\t<div id=claimed-orders-div><h2 style='text-align:center'>æ­£åœ¨åŠ è½½ã€‚ã€‚ã€‚</h2></div>","\t</body>","\t<script>","\t\t$(document).ready(function(){","\t\t\t$(\".helpText\").hide();","\t\t\t$(\"#show-helpText\").on(\"click\", function(){","\t\t\t\t$(\".helpText\").toggle();","\t\t\t});","\t\t\t$(\"#revert-order-close-order-compare\").hide();","\t\t\t$(\"#show-revert-order-close-order-compare\").on(\"click\", function(){","\t\t\t\t$(\"#revert-order-close-order-compare\").toggle();","\t\t\t});","\t\t\t$.ajax({","\t\t\t\tmethod: \"post\",","\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\tsuccess: function(backData){","\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t} else {","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(\"<h3 style='text-align:center'>æˆ‘å…¶å®å¹¶æ²¡æœ‰æŠ¢è›‹ã€‚ã€‚ã€‚</h3><br><img src='../images/honghuangzhili.jpg' alt='http://bbs.178.com/thread-20241673-1-1.html' style='display: block; margin: 0 auto'>\");","\t\t\t\t\t}","\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders);","\t\t\t\t\t$(\".order-change-qty-div\").hide();","\t\t\t\t\t$(\".order-add-selfNote-div\").hide();","\t\t\t\t\t// PHP back order-confirm-btn","\t\t\t\t\t$(\".order-confirm-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-confirm-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-confirm-order-userId\");","\t\t\t\t\t\tvar qtyTaken = $(this).attr(\"data-qty-taken-confirm\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tif (confirm(\"è¯·ç¡®è®¤ä½ æ”¶åˆ°äº†å…¨éƒ¨æ•°é‡ \" + qtyTaken + \" ä¸ªè´§ç‰©äº†ï¼\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&orderTakenId=\" + orderTakenId + \"&orderStatus=2\";","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t// Cannot directly write php here since:","\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/21651701/writing-php-inside-javascript-function","\t\t\t\t\t\t\t\t//php is executed before the page is sent to the client. you have to make a second php script containing the function. ","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/arrival-confirmed.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders + \"ã€‚\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back order-change-qty-btn","\t\t\t\t\t$(\".order-change-qty-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-change-qty-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-change-qty-userId\");","\t\t\t\t\t\tvar originalQtyTaken = $(this).attr(\"data-qty-taken\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//ä¸»è¦ç”¨data-qty-leftæ¥åˆ¤æ–­type","\t\t\t\t\t\tvar qtyType = $(this).parent().attr(\"data-qty-left\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tvar orderChangeDivHtml;","\t\t\t\t\t\tvar orderChangeDivHtmlButtons = \"<button data-change-qty-orderId-btn=\" + orderId + \" type='submit'>æäº¤</button>\" +","\t\t\t\t\t\t\t\"<button data-change-qty-cancel-orderId-btn=\" + orderId + \">ä¿ºä¸æ”¹äº†</button>\";","\t\t\t\t\t\tif (qtyType != \"ALL IN\") {","\t\t\t\t\t\t\torderChangeDivHtml = \"æ›´æ”¹æ•°é‡ä¸º<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + \"<span>ä¸èƒ½è¶…è¿‡ \" + originalQtyTaken + \"ã€‚</span>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\torderChangeDivHtml = \"æ›´æ”¹æ•°é‡ä¸º<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t}","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").html(orderChangeDivHtml);","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").show();","\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\tvar qtyChangeTo = $(\"input[data-change-qty-orderId-input=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tif (isNaN(parseInt(qtyChangeTo))){","\t\t\t\t\t\t\t\talert(\"çœŸè°ƒçš®ï¼ä½ æ˜¯ğŸ’è¯·æ¥é€—æ¯”çš„å—ï¼Ÿ\");","\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\tif(parseInt(qtyChangeTo) < 1){","\t\t\t\t\t\t\t\t\talert(\"ğŸ˜ˆåˆ«ä»¥ä¸ºç¼–ç½‘ç«™çš„äººæ˜¯ä¸ªé€—é€¼å°±å…è®¸ä½ è¿™ä¹ˆèƒ¡æ¥ï¼\");","\t\t\t\t\t\t\t\t} else if (parseInt(qtyChangeTo) ==  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\talert(\"ğŸ¤“ä½ æ˜¯å¥½å¥‡è¿™æ¬¡ä¼šè¹¦å‡ºä»€ä¹ˆå½©è›‹è¿˜æ˜¯æƒ³å¸®æˆ‘debugæˆ‘çš„codeçœ‹çœ‹ç­‰äºçš„æƒ…å†µæˆ‘æ˜¯å¦è€ƒè™‘åœ¨å†…äº†ï¼Ÿ\");","\t\t\t\t\t\t\t\t} else if(parseInt(qtyChangeTo) <  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\tif(confirm(\"è¯·ç¡®è®¤æ›´æ”¹æ•°é‡ä¸º\" + qtyChangeTo + \"ã€‚\\næ„å‘³ç€ä½ å°†å°‘ä¸‹\" + cutOrdersNum + \"å•ã€‚\")){","\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t// MUST refresh div or user can resubmit change and mess up the qty right there, see obs 041317 80650am 3E","\t\t\t\t\t\t\t\t\t\t\t\t/*","\t\t\t\t\t\t\t\t\t\t\t\tæœç„¶ä¸èƒ½ç”¨æ­¤æ–¹æ³•åˆ·æ–°ï¼Œbuttonéƒ½ä¸ç®¡ç”¨äº†ã€‚","\t\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders);","\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t});æ‰€ä»¥ä¹Ÿè®¸åªå¾—é‡æ–°loadæœ€å¥½äº†*/","\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t//å¯¹é‡æ–°loadå°±æ²¡æœ‰html backdata äº†ï¼Œé‚£æŠŠ$(\"#echoBackData\").html(backData);æ”¾ä¸‹é¢æ¥å‘¢ï¼Ÿ","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//è¿™æ ·ä¸ç®¡ç”¨ï¼Œçœ‹æ¥åªèƒ½ç”¨alertäº†ã€‚","\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/5294842/refresh-a-page-using-javascript-or-html","\t\t\t\t\t\t\t\t\t\t//å¦‚æœuserç‚¹å®Œè¿™ä¸ªé©¬ä¸Šç‚¹äº†revertï¼Œé‚£é¿å…ç»™revert-buttonæä¾›è¿˜æ²¡æœ‰è¢«changeçš„qtyï¼Œå› ä¸ºæ²¡æœ‰reloadå°±ä¸ä¼šé‡æ–°queryæ•°æ®åº“å°±æ‹¿ä¸åˆ°æœ€æ–°qtyLeft","\t\t\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t// Do nothing","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\tif (qtyType != \"ALL IN\"){","\t\t\t\t\t\t\t\t\t\talert(\"ğŸ¤“å¦®è¨çš®ï¼ä½ çœ‹çœ‹ \" + originalQtyTaken + \" æ¯” \" + qtyChangeTo + \" å¤§ï¼Ÿä½ æ•°å­¦æ˜¯ä½“è‚²è€å¸ˆæ•™çš„å§å“ˆå“ˆå“ˆå“ˆå“ˆï¼\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\t\tvar addOrdersNum = cutOrdersNum * (-1);","\t\t\t\t\t\t\t\t\t\tif(confirm(\"è¯·ç¡®è®¤æ›´æ”¹æ•°é‡ä¸º\" + qtyChangeTo + \"ã€‚\\næ˜ç¡®ä½ å†å¤šä¸‹\" + addOrdersNum + \"å•ã€‚\")){","\t\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t\t//ä¿æŒcutOrdersNumï¼Œphpåº”è¯¥å¯ä»¥ç›´æ¥è´Ÿè´Ÿå¾—æ­£","\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t} else {","","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}\t","\t\t\t\t\t\t});","\t\t\t\t\t\t$(\"button[data-change-qty-cancel-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").hide();","\t\t\t\t\t\t});","\t\t\t\t\t\t","\t\t\t\t\t});","\t\t\t\t\t// PHP back add/change-self-note-button","\t\t\t\t\t$(\".order-add-selfNote-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-add-selfNote-orderId\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t$(\"div[data-order-add-selfNote-div-orderId=\" + orderId + \"]\").toggle();","\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar selfNote = $(\"input[data-order-add-selfNote-input-orderId=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tvar sendData = \"orderTakenId=\" + orderTakenId + \"&selfNote=\" + selfNote;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/add-selfNote.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t});","\t\t\t\t\t});","\t\t\t\t\t// PHP back revert-order-btn","\t\t\t\t\t$(\".revert-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-revert-order-userId\");","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-revert-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-revert-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\tif(confirm(\"ç¡®è®¤é€€å›è®¢å•å—ï¼Ÿ\\nè¯·æ³¨æ„ï¼Œä½ æ— æ³•é‡æ–°ç”³é¢†è¿™ä¸ªè›‹è›‹äº†ï¼\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-revert.php?\",","\t\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders + \"ã€‚\");","\t\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t//å…¶å®ç›´æ¥å¯ä»¥åˆ·æ–°äº†ï¼Œå› ä¸ºè¦æ›´æ–°orders-numï¼Œæ‰€ä»¥å¾€åè¿™ç§éœ€è¦åˆ·æ–°å…¶ä»–è¿å¸¦æ•°æ®æ—¶ä¹Ÿä¸ç”¨å°±remove","\t\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t} else {","","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back close-order-btn","\t\t\t\t\t$(\".close-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-close-order-userId\");","\t\t\t\t\t\tvar orderId =$(this).attr(\"data-close-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-close-order-back-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar closeReason = prompt(\"ä¸ºäº†æ–¹ä¾¿è¿½è¸ªé€€æ¬¾ï¼Œè¯·è¾“å…¥ä»»ä½•ä½ ä¹‹åæ‰€éœ€è¦çš„æé†’ä¿¡æ¯ä¾‹å¦‚ç”¨çš„å“ªå¼ å¡ä¹‹ç±»çš„ï¼Œè¯·å‹¿è¾“å…¥å…¨éƒ¨å¡å·ï¼Œå› ä¸ºæˆ‘ä¹Ÿä¸æ„Ÿå…´è¶£ã€‚ï¼ˆå¿…å¡«ï¼Œè‹¥å•¥éƒ½ä¸å¡«ä¸äºˆé€šè¿‡ï¼‰\\nè¯·æ³¨æ„ä½ æ— æ³•å†é‡æ–°å¼€å¯è¿™ä¸ªè®¢å•ã€‚\");","\t\t\t\t\t\t//å†æ”¹æˆwhileå§ã€‚ã€‚","\t\t\t\t\t\t/*whileä¸è¡Œï¼Œä¸èƒ½cancel","\t\t\t\t\t\twhile (!closeReason){","\t\t\t\t\t\t\tcloseReason = prompt(\"ğŸ‘ºè€å…«å®å„¿çš„äº¤ä»£ï¼\");","\t\t\t\t\t\t}*/","\t\t\t\t\t\t//if(closeReason != null){","\t\t\t\t\t\tif(closeReason){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderStatus=8\" + \"&exceptionNote=\" + closeReason + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-close.php?\",","\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"æ€»å…±å•æ•°ï¼š\" + totalOrders + \"ã€‚\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove(); 041017 63714am åˆå†™å›å»äº†","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t//å…¶å®ä¸ç”¨ç”¨whileï¼Œè§040917 101746pm 3E OBS","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/30389982/how-to-set-prompt-textbox-field-in-js-as-required-field","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/154059/how-do-you-check-for-an-empty-string-in-javascript","\t\t\t\t\t\t\t//è²Œä¼¼è¿˜æ˜¯å¾—ç”¨while","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t}","\t\t\t});","\t\t});","\t</script>","</html>"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":112.5,"selection":{"start":{"row":11,"column":56},"end":{"row":11,"column":58},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1492865331294,"hash":"cf9290847887116922c8876222ad115d7ece426d"}