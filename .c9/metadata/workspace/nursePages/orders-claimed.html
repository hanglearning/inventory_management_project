{"filter":false,"title":"orders-claimed.html","tooltip":"/nursePages/orders-claimed.html","undoManager":{"mark":4,"position":4,"stack":[[{"start":{"row":193,"column":0},"end":{"row":193,"column":43},"action":"insert","lines":[".replaceWith(\"<div class='loader'></div>\");"],"id":2}],[{"start":{"row":193,"column":0},"end":{"row":194,"column":0},"action":"remove","lines":[".replaceWith(\"<div class='loader'></div>\");",""],"id":3}],[{"start":{"row":149,"column":84},"end":{"row":150,"column":0},"action":"insert","lines":["",""],"id":6},{"start":{"row":150,"column":0},"end":{"row":150,"column":11},"action":"insert","lines":["\t\t\t\t\t\t\t\t\t\t\t"]}],[{"start":{"row":150,"column":11},"end":{"row":150,"column":110},"action":"insert","lines":["$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");"],"id":7}],[{"start":{"row":0,"column":0},"end":{"row":263,"column":7},"action":"remove","lines":["<DOCTYPE! html>","<html>","<head>","\t<Title>我领到的订单</Title>","\t<script src=\"../js/jquery.js\" type=\"text/javascript\"></script>","</head>","\t<body>","\t\t<h1>😎这里的订单都是我抢到的👍</h1>","\t\t<!-- http://stackoverflow.com/questions/114543/how-to-horizontally-center-a-div-in-another-div -->","\t\t<div id=\"help-btns\" style=\"display: table;margin: 0 auto\">","\t\t<button id=\"show-helpText\">下面这些可怕的按钮是干什么的？🙀</button>","\t\t<button id=\"show-revert-order-close-order-compare\">⚠️【返回订单】与【关闭订单】有何区别？</button>","\t\t</div>","\t\t<h4 class='helpText'>⚠️注意：如果你已经成功的下出来了你的蛋那么请你收到货的时候点击【确认收货】。</h4>","\t\t<h4 class='helpText'>⚠️点击【修改数量】如果你发现你其实下不出来这么多蛋，比如信用卡或者地址限制的原因。如果不是ALL IN的蛋的话目前只能往少里改。</h4>","\t\t<h4 class='helpText'>⚠️点击【添加/修改备注】（此项选填）除了神医提供的备注，你还可以就此单加入一些自己的备注，比如说用哪张卡下的单（建议用卡昵称或者填写卡号后四位）或者下到了哪个地址。此信息后台不会加密所以填写完整的卡号你就等着被我盗刷吧！🤑</h4>","\t\t<h4 class='helpText'>⚠️点击【返回订单】如果你领单后发现你无法下出这些蛋来。没关系，常在河边走哪有不湿鞋，这个订单将会在【所有订单】中被标记为“已返回”而且数量会加回原来的收货数量，给年轻人一个机会吧！</h4>","\t\t<h4 class='helpText'>⚠️点击【关闭订单】如果任何时候你发现你被砍单，丢单或任何非你本人原因导致的下单后货物没有收到。<span style='color:red; font-size: 20px'>此时可以去【追踪退款】中追踪退款。请一定注意商家的退款否则飞了的💰自己亏！！！</span></h4>","\t\t<p id=\"revert-order-close-order-compare\">返回订单意味着你领单后却发现根本就下不出来这些货，比如信用卡过不了等原因；而关闭订单意味着你一开始网站已经确认你的单子被网店接受，但之后却因为种种原因导致砍单之类的，一般来说你的信用卡是已经被扣了款。所以关闭订单可以帮你或者提醒你有些单子的refund记得去keep an eye on👀!</p>","\t\t<div id=\"echoBackData\" style=\"color: red\"></div>","\t\t<div id=\"totalOrdersNum\"></div>","\t\t<div id=claimed-orders-div><h2 style='text-align:center'>正在加载。。。</h2></div>","\t</body>","\t<script>","\t\t$(document).ready(function(){","\t\t\t$(\".helpText\").hide();","\t\t\t$(\"#show-helpText\").on(\"click\", function(){","\t\t\t\t$(\".helpText\").toggle();","\t\t\t});","\t\t\t$(\"#revert-order-close-order-compare\").hide();","\t\t\t$(\"#show-revert-order-close-order-compare\").on(\"click\", function(){","\t\t\t\t$(\"#revert-order-close-order-compare\").toggle();","\t\t\t});","\t\t\t$.ajax({","\t\t\t\tmethod: \"post\",","\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\tsuccess: function(backData){","\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t} else {","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(\"<h3 style='text-align:center'>我其实并没有抢蛋。。。</h3><br><img src='../images/honghuangzhili.jpg' alt='http://bbs.178.com/thread-20241673-1-1.html' style='display: block; margin: 0 auto'>\");","\t\t\t\t\t}","\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders);","\t\t\t\t\t$(\".order-change-qty-div\").hide();","\t\t\t\t\t$(\".order-add-selfNote-div\").hide();","\t\t\t\t\t// PHP back order-confirm-btn","\t\t\t\t\t$(\".order-confirm-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-confirm-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-confirm-order-userId\");","\t\t\t\t\t\tvar qtyTaken = $(this).attr(\"data-qty-taken-confirm\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tif (confirm(\"请确认你收到了全部数量 \" + qtyTaken + \" 个货物了！\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&orderTakenId=\" + orderTakenId + \"&orderStatus=2\";","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t// Cannot directly write php here since:","\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/21651701/writing-php-inside-javascript-function","\t\t\t\t\t\t\t\t//php is executed before the page is sent to the client. you have to make a second php script containing the function. ","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/arrival-confirmed.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders + \"。\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back order-change-qty-btn","\t\t\t\t\t$(\".order-change-qty-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-change-qty-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-change-qty-userId\");","\t\t\t\t\t\tvar originalQtyTaken = $(this).attr(\"data-qty-taken\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//主要用data-qty-left来判断type","\t\t\t\t\t\tvar qtyType = $(this).parent().attr(\"data-qty-left\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tvar orderChangeDivHtml;","\t\t\t\t\t\tvar orderChangeDivHtmlButtons = \"<button data-change-qty-orderId-btn=\" + orderId + \" type='submit'>提交</button>\" +","\t\t\t\t\t\t\t\"<button data-change-qty-cancel-orderId-btn=\" + orderId + \">俺不改了</button>\";","\t\t\t\t\t\tif (qtyType != \"ALL IN\") {","\t\t\t\t\t\t\torderChangeDivHtml = \"更改数量为<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + \"<span>不能超过 \" + originalQtyTaken + \"。</span>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\torderChangeDivHtml = \"更改数量为<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t}","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").html(orderChangeDivHtml);","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").show();","\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\tvar qtyChangeTo = $(\"input[data-change-qty-orderId-input=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tif (isNaN(parseInt(qtyChangeTo))){","\t\t\t\t\t\t\t\talert(\"真调皮！你是🐒请来逗比的吗？\");","\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\tif(parseInt(qtyChangeTo) < 1){","\t\t\t\t\t\t\t\t\talert(\"😈别以为编网站的人是个逗逼就允许你这么胡来！\");","\t\t\t\t\t\t\t\t} else if (parseInt(qtyChangeTo) ==  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\talert(\"🤓你是好奇这次会蹦出什么彩蛋还是想帮我debug我的code看看等于的情况我是否考虑在内了？\");","\t\t\t\t\t\t\t\t} else if(parseInt(qtyChangeTo) <  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\tif(confirm(\"请确认更改数量为\" + qtyChangeTo + \"。\\n意味着你将少下\" + cutOrdersNum + \"单。\")){","\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t// MUST refresh div or user can resubmit change and mess up the qty right there, see obs 041317 80650am 3E","\t\t\t\t\t\t\t\t\t\t\t\t/*","\t\t\t\t\t\t\t\t\t\t\t\t果然不能用此方法刷新，button都不管用了。","\t\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders);","\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t});所以也许只得重新load最好了*/","\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t//对重新load就没有html backdata 了，那把$(\"#echoBackData\").html(backData);放下面来呢？","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//这样不管用，看来只能用alert了。","\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/5294842/refresh-a-page-using-javascript-or-html","\t\t\t\t\t\t\t\t\t\t//如果user点完这个马上点了revert，那避免给revert-button提供还没有被change的qty，因为没有reload就不会重新query数据库就拿不到最新qtyLeft","\t\t\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t// Do nothing","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\tif (qtyType != \"ALL IN\"){","\t\t\t\t\t\t\t\t\t\talert(\"🤓妮萨皮！你看看 \" + originalQtyTaken + \" 比 \" + qtyChangeTo + \" 大？你数学是体育老师教的吧哈哈哈哈哈！\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\t\tvar addOrdersNum = cutOrdersNum * (-1);","\t\t\t\t\t\t\t\t\t\tif(confirm(\"请确认更改数量为\" + qtyChangeTo + \"。\\n明确你再多下\" + addOrdersNum + \"单。\")){","\t\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t\t//保持cutOrdersNum，php应该可以直接负负得正","\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t} else {","","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}\t","\t\t\t\t\t\t});","\t\t\t\t\t\t$(\"button[data-change-qty-cancel-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").hide();","\t\t\t\t\t\t});","\t\t\t\t\t\t","\t\t\t\t\t});","\t\t\t\t\t// PHP back add/change-self-note-button","\t\t\t\t\t$(\".order-add-selfNote-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-add-selfNote-orderId\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t$(\"div[data-order-add-selfNote-div-orderId=\" + orderId + \"]\").toggle();","\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar selfNote = $(\"input[data-order-add-selfNote-input-orderId=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tvar sendData = \"orderTakenId=\" + orderTakenId + \"&selfNote=\" + selfNote;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/add-selfNote.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t});","\t\t\t\t\t});","\t\t\t\t\t// PHP back revert-order-btn","\t\t\t\t\t$(\".revert-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-revert-order-userId\");","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-revert-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-revert-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\tif(confirm(\"确认返回订单吗？\\n请注意，你无法重新申领这个蛋蛋了！\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-revert.php?\",","\t\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders + \"。\");","\t\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t//其实直接可以刷新了，因为要更新orders-num，所以往后这种需要刷新其他连带数据时也不用就remove","\t\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t} else {","","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back close-order-btn","\t\t\t\t\t$(\".close-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-close-order-userId\");","\t\t\t\t\t\tvar orderId =$(this).attr(\"data-close-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-close-order-back-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar closeReason = prompt(\"为了方便追踪退款，请输入任何你之后所需要的提醒信息例如用的哪张卡之类的，请勿输入全部卡号，因为我也不感兴趣。（必填，若啥都不填不予通过）\\n请注意你无法再重新开启这个订单。\");","\t\t\t\t\t\t//再改成while吧。。","\t\t\t\t\t\t/*while不行，不能cancel","\t\t\t\t\t\twhile (!closeReason){","\t\t\t\t\t\t\tcloseReason = prompt(\"👺老八实儿的交代！\");","\t\t\t\t\t\t}*/","\t\t\t\t\t\t//if(closeReason != null){","\t\t\t\t\t\tif(closeReason){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderStatus=8\" + \"&exceptionNote=\" + closeReason + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-close.php?\",","\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders + \"。\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove(); 041017 63714am 又写回去了","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t//其实不用用while，见040917 101746pm 3E OBS","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/30389982/how-to-set-prompt-textbox-field-in-js-as-required-field","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/154059/how-do-you-check-for-an-empty-string-in-javascript","\t\t\t\t\t\t\t//貌似还是得用while","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t}","\t\t\t});","\t\t});","\t</script>","</html>"],"id":8},{"start":{"row":0,"column":0},"end":{"row":263,"column":7},"action":"insert","lines":["<DOCTYPE! html>","<html>","<head>","\t<Title>我领到的订单</Title>","\t<script src=\"../js/jquery.js\" type=\"text/javascript\"></script>","</head>","\t<body>","\t\t<h1>😎这里的订单都是我抢到的👍</h1>","\t\t<!-- http://stackoverflow.com/questions/114543/how-to-horizontally-center-a-div-in-another-div -->","\t\t<div id=\"help-btns\" style=\"display: table;margin: 0 auto\">","\t\t<button id=\"show-helpText\">下面这些可怕的按钮是干什么的？🙀</button>","\t\t<button id=\"show-revert-order-close-order-compare\">⚠️【退回订单】与【关闭订单】有何区别？</button>","\t\t</div>","\t\t<h4 class='helpText'>⚠️注意：如果你已经成功的下出来了你的蛋那么请你收到货的时候点击【确认收货】。</h4>","\t\t<h4 class='helpText'>⚠️点击【修改数量】如果你发现你其实下不出来这么多蛋，比如信用卡或者地址限制的原因。如果不是ALL IN的蛋的话目前只能往少里改。</h4>","\t\t<h4 class='helpText'>⚠️点击【添加/修改备注】（此项选填）除了神医提供的备注，你还可以就此单加入一些自己的备注，比如说用哪张卡下的单（建议用卡昵称或者填写卡号后四位）或者下到了哪个地址。此信息后台不会加密所以填写完整的卡号你就等着被我盗刷吧！🤑</h4>","\t\t<h4 class='helpText'>⚠️点击【退回订单】如果你领单后发现你无法下出这些蛋来。没关系，常在河边走哪有不湿鞋，这个订单将会在【所有订单】中被标记为“已退回”而且数量会加回原来的收货数量，给年轻人一个机会吧！</h4>","\t\t<h4 class='helpText'>⚠️点击【关闭订单】如果任何时候你发现你被砍单，丢单或任何非你本人原因导致的下单后货物没有收到。<span style='color:red; font-size: 20px'>此时可以去【追踪退款】中追踪退款。请一定注意商家的退款否则飞了的💰自己亏！！！</span></h4>","\t\t<p id=\"revert-order-close-order-compare\">退回订单意味着你领单后却发现根本就下不出来这些货，比如信用卡过不了等原因；而关闭订单意味着你一开始网站已经确认你的单子被网店接受，但之后却因为种种原因导致砍单之类的，一般来说你的信用卡是已经被扣了款。所以关闭订单可以帮你或者提醒你有些单子的refund记得去keep an eye on👀!</p>","\t\t<div id=\"echoBackData\" style=\"color: red\"></div>","\t\t<div id=\"totalOrdersNum\"></div>","\t\t<div id=claimed-orders-div><h2 style='text-align:center'>正在加载。。。</h2></div>","\t</body>","\t<script>","\t\t$(document).ready(function(){","\t\t\t$(\".helpText\").hide();","\t\t\t$(\"#show-helpText\").on(\"click\", function(){","\t\t\t\t$(\".helpText\").toggle();","\t\t\t});","\t\t\t$(\"#revert-order-close-order-compare\").hide();","\t\t\t$(\"#show-revert-order-close-order-compare\").on(\"click\", function(){","\t\t\t\t$(\"#revert-order-close-order-compare\").toggle();","\t\t\t});","\t\t\t$.ajax({","\t\t\t\tmethod: \"post\",","\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\tsuccess: function(backData){","\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t} else {","\t\t\t\t\t\t$(\"#claimed-orders-div\").html(\"<h3 style='text-align:center'>我其实并没有抢蛋。。。</h3><br><img src='../images/honghuangzhili.jpg' alt='http://bbs.178.com/thread-20241673-1-1.html' style='display: block; margin: 0 auto'>\");","\t\t\t\t\t}","\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders);","\t\t\t\t\t$(\".order-change-qty-div\").hide();","\t\t\t\t\t$(\".order-add-selfNote-div\").hide();","\t\t\t\t\t// PHP back order-confirm-btn","\t\t\t\t\t$(\".order-confirm-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-confirm-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-confirm-order-userId\");","\t\t\t\t\t\tvar qtyTaken = $(this).attr(\"data-qty-taken-confirm\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tif (confirm(\"请确认你收到了全部数量 \" + qtyTaken + \" 个货物了！\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&orderTakenId=\" + orderTakenId + \"&orderStatus=2\";","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t// Cannot directly write php here since:","\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/21651701/writing-php-inside-javascript-function","\t\t\t\t\t\t\t\t//php is executed before the page is sent to the client. you have to make a second php script containing the function. ","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/arrival-confirmed.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders + \"。\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back order-change-qty-btn","\t\t\t\t\t$(\".order-change-qty-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-change-qty-orderId\");","\t\t\t\t\t\tvar userId = $(this).attr(\"data-change-qty-userId\");","\t\t\t\t\t\tvar originalQtyTaken = $(this).attr(\"data-qty-taken\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t//主要用data-qty-left来判断type","\t\t\t\t\t\tvar qtyType = $(this).parent().attr(\"data-qty-left\");","\t\t\t\t\t\t//var beforeTotalQtyTaken = $(this).parent().attr(\"data-current-total-qty-taken\");","\t\t\t\t\t\tvar orderChangeDivHtml;","\t\t\t\t\t\tvar orderChangeDivHtmlButtons = \"<button data-change-qty-orderId-btn=\" + orderId + \" type='submit'>提交</button>\" +","\t\t\t\t\t\t\t\"<button data-change-qty-cancel-orderId-btn=\" + orderId + \">俺不改了</button>\";","\t\t\t\t\t\tif (qtyType != \"ALL IN\") {","\t\t\t\t\t\t\torderChangeDivHtml = \"更改数量为<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + \"<span>不能超过 \" + originalQtyTaken + \"。</span>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\torderChangeDivHtml = \"更改数量为<input data-change-qty-orderId-input=\" + orderId + \" type='text'><br/>\" + orderChangeDivHtmlButtons;","\t\t\t\t\t\t}","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").html(orderChangeDivHtml);","\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").show();","\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\tvar qtyChangeTo = $(\"input[data-change-qty-orderId-input=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tif (isNaN(parseInt(qtyChangeTo))){","\t\t\t\t\t\t\t\talert(\"真调皮！你是🐒请来逗比的吗？\");","\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\tif(parseInt(qtyChangeTo) < 1){","\t\t\t\t\t\t\t\t\talert(\"😈别以为编网站的人是个逗逼就允许你这么胡来！\");","\t\t\t\t\t\t\t\t} else if (parseInt(qtyChangeTo) ==  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\talert(\"🤓你是好奇这次会蹦出什么彩蛋还是想帮我debug我的code看看等于的情况我是否考虑在内了？\");","\t\t\t\t\t\t\t\t} else if(parseInt(qtyChangeTo) <  parseInt(originalQtyTaken)){","\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\tif(confirm(\"请确认更改数量为\" + qtyChangeTo + \"。\\n意味着你将少下\" + cutOrdersNum + \"单。\")){","\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t// MUST refresh div or user can resubmit change and mess up the qty right there, see obs 041317 80650am 3E","\t\t\t\t\t\t\t\t\t\t\t\t/*","\t\t\t\t\t\t\t\t\t\t\t\t果然不能用此方法刷新，button都不管用了。","\t\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/orders-claimed.php\",","\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (backData != ''){","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#claimed-orders-div\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders);","\t\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t\t});所以也许只得重新load最好了*/","\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t//对重新load就没有html backdata 了，那把$(\"#echoBackData\").html(backData);放下面来呢？","\t\t\t\t\t\t\t\t\t\t\t\t//$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t\t\t//这样不管用，看来只能用alert了。","\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t//http://stackoverflow.com/questions/5294842/refresh-a-page-using-javascript-or-html","\t\t\t\t\t\t\t\t\t\t//如果user点完这个马上点了revert，那避免给revert-button提供还没有被change的qty，因为没有reload就不会重新query数据库就拿不到最新qtyLeft","\t\t\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\t// Do nothing","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\tif (qtyType != \"ALL IN\"){","\t\t\t\t\t\t\t\t\t\talert(\"🤓妮萨皮！你看看 \" + originalQtyTaken + \" 比 \" + qtyChangeTo + \" 大？你数学是体育老师教的吧哈哈哈哈哈！\");","\t\t\t\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t\t\t\tvar cutOrdersNum = parseInt(originalQtyTaken) - parseInt(qtyChangeTo);","\t\t\t\t\t\t\t\t\t\tvar addOrdersNum = cutOrdersNum * (-1);","\t\t\t\t\t\t\t\t\t\tif(confirm(\"请确认更改数量为\" + qtyChangeTo + \"。\\n明确你再多下\" + addOrdersNum + \"单。\")){","\t\t\t\t\t\t\t\t\t\t\t$(\"button[data-change-qty-orderId-btn=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t\t\t\tvar sendData = \"orderId=\" + orderId + \"&userId=\" + userId + \"&qtyTaken=\" + qtyChangeTo + \"&cutOrdersNum=\" + cutOrdersNum + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t\t\t\t\t//保持cutOrdersNum，php应该可以直接负负得正","\t\t\t\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/claimed-qty-change.php?\",","\t\t\t\t\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t\t\t\talert(backData);","\t\t\t\t\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t\t\t} else {","","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t}\t","\t\t\t\t\t\t});","\t\t\t\t\t\t$(\"button[data-change-qty-cancel-orderId-btn=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"div[data-order-change-qty-div-orderId=\" + orderId + \"]\").hide();","\t\t\t\t\t\t});","\t\t\t\t\t\t","\t\t\t\t\t});","\t\t\t\t\t// PHP back add/change-self-note-button","\t\t\t\t\t$(\".order-add-selfNote-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-add-selfNote-orderId\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\t$(\"div[data-order-add-selfNote-div-orderId=\" + orderId + \"]\").toggle();","\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").on(\"click\", function(){","\t\t\t\t\t\t\t$(\"button[data-submit-selfNote-orderId=\" + orderId + \"]\").replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar selfNote = $(\"input[data-order-add-selfNote-input-orderId=\" + orderId + \"]\").val();","\t\t\t\t\t\t\tvar sendData = \"orderTakenId=\" + orderTakenId + \"&selfNote=\" + selfNote;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/add-selfNote.php?\",","\t\t\t\t\t\t\t\tdata: sendData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t});","\t\t\t\t\t});","\t\t\t\t\t// PHP back revert-order-btn","\t\t\t\t\t$(\".revert-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-revert-order-userId\");","\t\t\t\t\t\tvar orderId = $(this).attr(\"data-revert-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-revert-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\tif(confirm(\"确认退回订单吗？\\n请注意，你无法重新申领这个蛋蛋了！\")){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-revert.php?\",","\t\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders + \"。\");","\t\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t\t//其实直接可以刷新了，因为要更新orders-num，所以往后这种需要刷新其他连带数据时也不用就remove","\t\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t} else {","","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t\t// PHP back close-order-btn","\t\t\t\t\t$(\".close-order-btn\").on(\"click\", function(){","\t\t\t\t\t\tvar userId = $(this).attr(\"data-close-order-userId\");","\t\t\t\t\t\tvar orderId =$(this).attr(\"data-close-orderId\");","\t\t\t\t\t\tvar qtyAddedBack = $(this).attr(\"data-close-order-back-qty\");","\t\t\t\t\t\tvar orderTakenId = $(this).parent().attr(\"data-confirm-order-div-orderTakenId\");","\t\t\t\t\t\tvar closeReason = prompt(\"为了方便追踪退款，请输入任何你之后所需要的提醒信息例如用的哪张卡之类的，请勿输入全部卡号，因为我也不感兴趣。（必填，若啥都不填不予通过）\\n请注意你无法再重新开启这个订单。\");","\t\t\t\t\t\t//再改成while吧。。","\t\t\t\t\t\t/*while不行，不能cancel","\t\t\t\t\t\twhile (!closeReason){","\t\t\t\t\t\t\tcloseReason = prompt(\"👺老八实儿的交代！\");","\t\t\t\t\t\t}*/","\t\t\t\t\t\t//if(closeReason != null){","\t\t\t\t\t\tif(closeReason){","\t\t\t\t\t\t\t$(this).replaceWith(\"<div class='loader'></div>\");","\t\t\t\t\t\t\tvar sentData = \"userId=\" + userId + \"&orderId=\" + orderId + \"&qtyAddedBack=\" + qtyAddedBack + \"&orderStatus=8\" + \"&exceptionNote=\" + closeReason + \"&orderTakenId=\" + orderTakenId;","\t\t\t\t\t\t\t$.ajax({","\t\t\t\t\t\t\t\tmethod: \"post\",","\t\t\t\t\t\t\t\turl: \"../nursePages/orders_claimed/order-close.php?\",","\t\t\t\t\t\t\t\tdata: sentData,","\t\t\t\t\t\t\t\tsuccess: function(backData){","\t\t\t\t\t\t\t\t\t//alert(backData);","\t\t\t\t\t\t\t\t\t$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove();","\t\t\t\t\t\t\t\t\tvar totalOrders = $(\"div[class='claimedOrdersTableList']\").length;","\t\t\t\t\t\t\t\t\t$(\"#totalOrdersNum\").html(\"总共单数：\" + totalOrders + \"。\");","\t\t\t\t\t\t\t\t\t$(\"#echoBackData\").html(backData);","\t\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t});","\t\t\t\t\t\t\t//$(\"#page-switch\").load(\"../nursePages/orders-claimed.html\");","\t\t\t\t\t\t\t//$(\"div[data-confirm-order-div-orderId=\" + orderId + \"]\").remove(); 041017 63714am 又写回去了","\t\t\t\t\t\t} else {","\t\t\t\t\t\t\t//其实不用用while，见040917 101746pm 3E OBS","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/30389982/how-to-set-prompt-textbox-field-in-js-as-required-field","\t\t\t\t\t\t\t//http://stackoverflow.com/questions/154059/how-do-you-check-for-an-empty-string-in-javascript","\t\t\t\t\t\t\t//貌似还是得用while","\t\t\t\t\t\t}","\t\t\t\t\t});","\t\t\t\t}","\t\t\t});","\t\t});","\t</script>","</html>"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":112.5,"selection":{"start":{"row":11,"column":56},"end":{"row":11,"column":58},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1492865331294,"hash":"cf9290847887116922c8876222ad115d7ece426d"}